<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Waschmaschinen Tracker</title>
  <link rel="icon" href="/assets/favicon.png" type="image/x-icon" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .timeline-item{position:relative;margin-bottom:2rem;padding-left:2.5rem}
    .timeline-dot{position:absolute;left:-0.5rem;top:0.5rem;width:1rem;height:1rem;background-color:#6366f1;border-radius:9999px;border:2px solid #1f2937;z-index:10}
    .dark .timeline-dot{border-color:#374151}
    .timeline-arrow{position:absolute;left:0.5rem;top:2rem;width:0;height:calc(100% - 3rem);border-left:2px dashed #4b5563;z-index:5}
    .dark .timeline-arrow{border-left-color:#6b7280}
    .timeline-item:last-child .timeline-arrow{display:none}
  </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans antialiased">
  <div class="container mx-auto p-4 max-w-4xl">
    <h1 class="text-4xl font-bold text-center text-white mb-8">Waschmaschinen Tracker</h1>

    <!-- Neue Messung -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg mb-8">
      <h2 class="text-2xl font-semibold mb-4 text-white">Neue Messung</h2>
      <form id="readingForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="prevKWh" class="block text-sm font-bold mb-2 text-gray-200">Vorheriger Zählerstand (kWh)</label>
          <input type="number" id="prevKWh" readonly
                 class="bg-gray-700 border border-gray-600 rounded w-full py-2 px-3 text-gray-300" />
        </div>
        <div>
          <label for="currentKWh" class="block text-sm font-bold mb-2 text-gray-200">Aktueller Zählerstand (kWh)</label>
          <input type="number" id="currentKWh" name="currentKWh" step="0.1" required
                 class="bg-gray-700 border border-gray-600 rounded w-full py-2 px-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="deltaKWh" class="block text-sm font-bold mb-2 text-gray-200">Verbrauch (Delta, kWh)</label>
          <input type="text" id="deltaKWh" readonly
                 class="bg-gray-700 border border-gray-600 rounded w-full py-2 px-3 text-gray-300" />
        </div>
        <div class="md:col-span-2">
          <label for="notes" class="block text-sm font-bold mb-2 text-gray-200">Notizen (optional)</label>
          <textarea id="notes" rows="3"
                    class="bg-gray-700 border border-gray-600 rounded w-full py-2 px-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>
        <div class="md:col-span-2">
          <button type="submit" id="submitReadingBtn"
                  class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:opacity-50 transition-all duration-200">
            Messung hinzufügen
          </button>
        </div>
      </form>
      <p id="formMessage" class="mt-4 text-center hidden"></p>
    </div>

    <!-- Zeitraum -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg mb-8">
      <h2 class="text-2xl font-semibold mb-4 text-white">Zeitraum wählen</h2>
      <div class="flex flex-wrap items-center gap-4">
        <label class="text-gray-200">Jahr:
          <select id="filterYear"
                  class="ml-2 bg-gray-700 border border-gray-600 text-white rounded px-3 py-2"></select>
        </label>
        <label class="text-gray-200">Monat:
          <select id="filterMonth"
                  class="ml-2 bg-gray-700 border border-gray-600 text-white rounded px-3 py-2">
            <option value="">Alle Monate</option>
            <option value="1">Januar</option>
            <option value="2">Februar</option>
            <option value="3">März</option>
            <option value="4">April</option>
            <option value="5">Mai</option>
            <option value="6">Juni</option>
            <option value="7">Juli</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">Oktober</option>
            <option value="11">November</option>
            <option value="12">Dezember</option>
          </select>
        </label>
        <button id="applyFilter"
                class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-6 py-2 rounded-lg transition-all duration-200">
          Filter anwenden
        </button>
      </div>
    </div>

    <!-- Monatsübersicht NUR nach Benutzer -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg mb-8">
      <h2 class="text-2xl font-semibold mb-4 text-white">Monatsübersicht (kWh nach Benutzer)</h2>
      <div id="monthlySummary" class="grid grid-cols-1 gap-4">
        <p class="text-gray-400 text-center" id="noMonthlySummary">Keine Daten für diesen Monat.</p>
      </div>
    </div>

    <!-- Jahresübersicht NUR nach Benutzer -->
    <div id="yearlySummaryWrapper">
      <div class="bg-gray-800 p-6 rounded-lg shadow-lg mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-white">Jahresübersicht</h2>
        <div id="yearlySummaryContent" class="grid grid-cols-1 gap-4">
          <p class="text-gray-400 text-center" id="noYearlySummary">
            Jahr wählen, um die Übersicht zu sehen.
          </p>
        </div>
      </div>
    </div>

    <!-- Timeline -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-semibold mb-4 text-white">Messungen</h2>
      <div id="timeline" class="relative pl-6 border-l-2 border-gray-600">
        <p class="text-gray-400 text-center" id="noReadingsMessage">Noch keine Messungen erfasst.</p>
      </div>
    </div>
  </div>

  <script src="./js/main.js"></script>
</body>
</html>
